<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote.min.js"
    ></script>
    <!-- <meta name="google-signin-client_id" content="403925975394-15n3dke3n5kd7v4ndjshcnbbbckg3sd8.apps.googleusercontent.com"> -->
    <script>
      var hostName = location.hostname;
      var endPoint = "/nuSource/api/v1/";
      var apiEndHost = hostName;
      var isKlassroom = hostName === "www.klassroom.in";
      var isKlassroomTest = hostName === "klassroom.edupanion.com";
      var isKlassroomKonnect = hostName.indexOf("klassroom") !== -1;
      var isPremierTuition = hostName.indexOf("premiertuition") !== -1;
      var isSkillSertifika = hostName.indexOf("app.skillsertifika") !== -1;
      var isSkillStestEnv =
        hostName.indexOf("skillsertifika-api.edupanion.com") !== -1;

      var googleClientId =
        "1072211908875-fq11f2s7flf63cmu9gld1bomfro2q5t4.apps.googleusercontent.com";
      if (
        hostName === "localhost" ||
        hostName.indexOf("edupanion") !== -1 ||
        hostName.indexOf("edmaester") !== -1
      ) {
        googleClientId =
          "403925975394-15n3dke3n5kd7v4ndjshcnbbbckg3sd8.apps.googleusercontent.com";
      }
      if (hostName === "localhost") {
        apiEndHost = "localhost";
      } else if (isKlassroom) {
        apiEndHost = "klassroom.edmingle.com";
      } else if (isKlassroomTest) {
        apiEndHost = "testklassroom.edupanion.com";
      } else if (hostName.indexOf("edmaester") !== -1) {
        apiEndHost = "edmaester-api.edupanion.com";
      } else if (
        hostName === "www.samarthacademy.in" ||
        hostName === "samarthacademy.edmingle.com"
      ) {
        apiEndHost = "samarthacademy-api.edmingle.com";
      } else if (
        hostName === "www.accountingminds.in" ||
        hostName === "accountingminds.edmingle.com"
      ) {
        apiEndHost = "accountingminds-api.edmingle.com";
      } else if (hostName === "www.witharin.com") {
        apiEndHost = "businessunplugged-api.edmingle.com";
      } else if (hostName.indexOf("aspiringclasses") !== -1) {
        apiEndHost = "aspiringclasses-api.edmingle.com";
      } else if (hostName === "businessunplugged.edupanion.com") {
        apiEndHost = "businessunplugged-api.edupanion.com";
      } else if (hostName === "bschool.edupanion.com") {
        apiEndHost = "bschool-api.edupanion.com";
      } else if (hostName.indexOf("premiertuition") !== -1) {
        apiEndHost = "premiertuition-api.edmingle.com";
      } else if (hostName.indexOf("alpham") !== -1) {
        apiEndHost = "alpham-api.edmingle.com";
      } else if (hostName.indexOf("careerheights") !== -1) {
        apiEndHost = "careerheights-api.edmingle.com";
      } else if (hostName.indexOf("kvclasses") !== -1) {
        apiEndHost = "kvclasses-api.edmingle.com";
      } else if (hostName.indexOf("mockdrill") !== -1) {
        apiEndHost = "mockdrill-api.edmingle.com";
      } else if (hostName.indexOf("amsc") !== -1) {
        apiEndHost = "amsc-api.edmingle.com";
      } else if (hostName.indexOf("study-point") !== -1) {
        apiEndHost = "studypoint-api.edmingle.com";
      } else if (hostName.indexOf("quantumleap") !== -1) {
        apiEndHost = "quantumleap-api.edmingle.com";
      } else if (hostName.indexOf("infinitestudies") !== -1) {
        apiEndHost = "isl-api.edmingle.com";
      } else if (hostName.indexOf("skae") !== -1) {
        apiEndHost = "skae-api.edmingle.com";
      } else if (hostName.indexOf("skillnet") !== -1) {
        apiEndHost = "tecxperts-api.edmingle.com";
      } else if (hostName.indexOf("edemo") !== -1) {
        apiEndHost = "edemo-api.edmingle.com";
      } else if (hostName.indexOf("demoacademy") !== -1) {
        apiEndHost = "prashant-api.edmingle.com";
      } else if (hostName.indexOf("lakescareerpoint") !== -1) {
        apiEndHost = "lakescareerpoint-api.edmingle.com";
      } else if (hostName.indexOf("theprayasindia") !== -1) {
        apiEndHost = "theprayasindia-api.edmingle.com";
      } else if (hostName.indexOf("apexcommerce") !== -1) {
        apiEndHost = "apexcommerce-api.edmingle.com";
      } else if (
        hostName.indexOf("www.skillsertifika") !== -1 ||
        hostName.indexOf("app.skillsertifika") !== -1
      ) {
        apiEndHost = "skillsertifika-api.edmingle.com";
      } else if (hostName.indexOf("hindguru") !== -1) {
        apiEndHost = "hindguru-api.edmingle.com";
      } else if (hostName.indexOf("onlinestudyzone") !== -1) {
        apiEndHost = "onlinestudyzone-api.edmingle.com";
      } else if (hostName.indexOf("jmkworld") !== -1) {
        apiEndHost = "jmkcomputers-api.edmingle.com";
      } else if (hostName.indexOf("fintechstudies") !== -1) {
        apiEndHost = "fintechstudies-api.edmingle.com";
      } else if (hostName.indexOf("mate-india") !== -1) {
        apiEndHost = "mateindia-api.edmingle.com";
      } else if (hostName.indexOf("shakyamuni") !== -1) {
        apiEndHost = "shakyamuni-api.edmingle.com";
      } else if (hostName.indexOf("chemophilicacademy") !== -1) {
        apiEndHost = "chemophilic-api.edmingle.com";
      } else if (hostName === "www.chemfact.com") {
        apiEndHost = "chemophilicedu-api.edmingle.com";
      } else if (hostName.indexOf("eduwizz") !== -1) {
        apiEndHost = "eduwizz-api.edmingle.com";
      } else if (hostName.indexOf("superleaderacademy") !== -1) {
        apiEndHost = "superleaderacademy-api.edmingle.com";
      } else if (hostName.indexOf("eduvertex") !== -1) {
        apiEndHost = "eduvertex-api.edmingle.com";
      } else if (hostName.indexOf("shepspioneer") !== -1) {
        apiEndHost = "shepspioneer-api.edmingle.com";
      } else if (hostName.indexOf("rvmfinishingschool") !== -1) {
        apiEndHost = "rvmfinishingschool-api.edmingle.com";
      } else if (hostName.indexOf("tinkermojo") !== -1) {
        apiEndHost = "tinkermojo-api.edmingle.com";
      } else if (hostName.indexOf("fasttechindia") !== -1) {
        apiEndHost = "fasttechindia-api.edmingle.com";
      } else if (hostName.indexOf("beingprofessional") !== -1) {
        apiEndHost = "beingprofessional-api.edmingle.com";
      } else if (hostName.indexOf("skyllme") !== -1) {
        apiEndHost = "skyllme-api.edmingle.com";
      } else if (hostName.indexOf("vyomalabs") !== -1) {
        apiEndHost = "vyomalabs-api.edmingle.com";
      } else if (
        hostName.indexOf("vyoma") !== -1 ||
        hostName.indexOf("sanskritfromhome") !== -1
      ) {
        apiEndHost = "vyoma-api.edmingle.com";
      } else if (hostName.indexOf("directionone") !== -1) {
        apiEndHost = "directiononeonline-api.edmingle.com";
      } else if (hostName.indexOf("ipshm") !== -1) {
        apiEndHost = "ipshm-api.edmingle.com";
      } else if (hostName.indexOf("khunga") !== -1) {
        apiEndHost = "khungaacademy-api.edmingle.com";
      } else if (hostName.indexOf("acda") !== -1) {
        apiEndHost = "acda-api.edmingle.com";
      } else if (hostName.indexOf("achieversacademy") !== -1) {
        apiEndHost = "achieversacademy-api.edmingle.com";
      } else if (hostName.indexOf("mathophilic") !== -1) {
        apiEndHost = "mathophilic-api.edmingle.com";
      } else if (hostName.indexOf("momentum") !== -1) {
        apiEndHost = "momentum-api.edmingle.com";
      } else if (hostName.indexOf("arkismart") !== -1) {
        apiEndHost = "arkismart-api.edmingle.com";
      } else if (hostName.indexOf("macawsglobal") !== -1) {
        apiEndHost = "macaws-api.edmingle.com";
      } else if (hostName.indexOf("squadonline") !== -1) {
        apiEndHost = "squadonline-api.edmingle.com";
      } else if (hostName.indexOf("acenglish") !== -1) {
        apiEndHost = "acenglish-api.edmingle.com";
      } else if (hostName.indexOf("skilleducationtraining") !== -1) {
        apiEndHost = "skilleducationtraining-api.edmingle.com";
      } else if (hostName.indexOf("mapleassistance") !== -1) {
        apiEndHost = "mapleassistance-api.edmingle.com";
      } else if (hostName === "account.edmingle.com") {
        apiEndHost = "account-api.edmingle.com";
      } else if (hostName.indexOf("innomatics") !== -1) {
        apiEndHost = "innomatics-api.edmingle.com";
      } else if (hostName.indexOf("skilltowill") !== -1) {
        apiEndHost = "skilltowill-api.edmingle.com";
      } else if (hostName.indexOf("rkmclasses") !== -1) {
        apiEndHost = "rkmclasses-api.edmingle.com";
      } else if (hostName.indexOf("integrum") !== -1) {
        apiEndHost = "integrum-api.edmingle.com";
      } else if (hostName.indexOf("certifyed") !== -1) {
        apiEndHost = "certifyed-api.edmingle.com";
      } else if (hostName.indexOf("jatinbatra") !== -1) {
        apiEndHost = "jatinbatra-api.edmingle.com";
      } else if (hostName.indexOf("espharma") !== -1) {
        apiEndHost = "espharma-api.edmingle.com";
      } else if (hostName.indexOf("arjuna") !== -1) {
        apiEndHost = "arjuna-api.edmingle.com";
      } else if (hostName.indexOf("jchemistry") !== -1) {
        apiEndHost = "jchemistry-api.edmingle.com";
      } else if (hostName.indexOf("1dayers") !== -1) {
        apiEndHost = "onedayers-api.edmingle.com";
      } else if (hostName.indexOf("maestroclasses") !== -1) {
        apiEndHost = "maestroclasses-api.edmingle.com";
      } else if (hostName.indexOf("suryashiksha") !== -1) {
        apiEndHost = "suryashiksha-api.edmingle.com";
      } else if (hostName.indexOf("grademaster") !== -1) {
        apiEndHost = "grademaster-api.edmingle.com";
      } else if (hostName.indexOf("saraswatieducare") !== -1) {
        apiEndHost = "saraswatieducare-api.edmingle.com";
      } else if (hostName.indexOf("samartheducare") !== -1) {
        apiEndHost = "samartheducare-api.edmingle.com";
      } else if (hostName.indexOf("realchemistry") !== -1) {
        apiEndHost = "realchemistry-api.edmingle.com";
      } else if (hostName.indexOf("lebdu") !== -1) {
        apiEndHost = "lebdu-api.edmingle.com";
      } else if (hostName.indexOf("onmyowntechnology") !== -1) {
        apiEndHost = "onmyowntechnology-api.edmingle.com";
      }

      var apiEndpoint = location.protocol + "//" + apiEndHost + endPoint;
      var isIDC = hostName !== "localhost";
      var websiteLocation = isIDC
        ? location.protocol + "//" + location.hostname
        : "http://" + hostName;
      var titleEle = document.getElementsByTagName("title")[0];
    </script>

    <!-- webengage script -->
    <script id="_webengage_script_tag" type="text/javascript"></script>
    <script>
      var webengage;
      function initEdmingleWebEngage(key) {
        !(function (w, e, b, n, g) {
          function o(e, t) {
            e[t[t.length - 1]] = function () {
              r.__queue.push([t.join("."), arguments]);
            };
          }
          var i,
            s,
            r = w[b],
            z = " ",
            l = "init options track screen onReady".split(z),
            a = "feedback survey notification".split(z),
            c = "options render clear abort".split(z),
            p = "Open Close Submit Complete View Click".split(z),
            u = "identify login logout setAttribute".split(z);
          if (!r || !r.__v) {
            for (
              w[b] = r = { __queue: [], __v: "6.0", user: {} }, i = 0;
              i < l.length;
              i++
            )
              o(r, [l[i]]);
            for (i = 0; i < a.length; i++) {
              for (r[a[i]] = {}, s = 0; s < c.length; s++)
                o(r[a[i]], [a[i], c[s]]);
              for (s = 0; s < p.length; s++) o(r[a[i]], [a[i], "on" + p[s]]);
            }
            for (i = 0; i < u.length; i++) o(r.user, ["user", u[i]]);
            setTimeout(function () {
              var f = e.createElement("script"),
                d = e.getElementById("_webengage_script_tag");
              (f.type = "text/javascript"),
                (f.async = !0),
                (f.src =
                  ("https:" == e.location.protocol
                    ? "https://widgets.in.webengage.com"
                    : "http://widgets.in.webengage.com") +
                  "/js/webengage-min-v-6.0.js"),
                d.parentNode.insertBefore(f, d);
            });
          }
        })(window, document, "webengage");
        webengage.init(key);
      }
      if (hostName.indexOf("edupanion") !== -1) {
        initEdmingleWebEngage("in~76aa2dc");
      } else if (hostName !== "localhost") {
        initEdmingleWebEngage("in~11b5642b9");
      }
    </script>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- <script src="https://js.pusher.com/4.4/pusher.min.js"></script> -->
    <script src="https://js.pusher.com/7.0/pusher.min.js"></script>
    <script src="https://checkout.stripe.com/checkout.js"></script>
    
<meta name="nuapp/config/environment" content="%7B%22modulePrefix%22%3A%22nuapp%22%2C%22environment%22%3A%22production%22%2C%22baseURL%22%3A%22/%22%2C%22locationType%22%3A%22hash%22%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%7D%2C%22APP%22%3A%7B%22name%22%3A%22nuapp%22%2C%22version%22%3A%220.0.0+7b4a2c2d%22%7D%2C%22exportApplicationGlobal%22%3Afalse%7D" />

    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">


    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/vendor-d41d8cd98f00b204e9800998ecf8427e.css">
    <!-- <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/video-js.min-b220ca14d8f24e25d2ca930ec083aaf9.css"> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.11.4/video-js.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/videojs-reso-switcher-fc88e7c2ed6f630f7730453aaca2e313.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/summernote-b85de256c09e8bcfbe16b0a48a103009.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/select2.min-8969ac4614d64a13dfc32e1eb4e731f7.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/slider-1ff78272efe06720dc0f8d3caf4d5423.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/pace-theme-center-simple-a02f4f13e87e44a3dbda282c58cb1142.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/mathquill-d38e99e10a29c992cbfaa5d0dbb7cf4d.css">
    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/stylesheets/fullcalendar.min-d9281be4daf6ec721663241291e9f77c.css" />

    <link rel="stylesheet" href="https://edmingle.b-cdn.net/myaccount/assets/nuapp-8270884381898240f897d42bc8ab2324.css" />

    <link
      href="https://cdn.jsdelivr.net/combine/npm/video.js@7.5/dist/video-js.min.css,npm/videojs-resolution-switcher-beta@0.4.3/lib/videojs-resolution-switcher.css"
      rel="stylesheet"
    />
    <script>
      function injectStyles(rule) {
        var div = $("<div />", {
          html: "&shy;<style>" + rule + "</style>",
        }).appendTo("body");
      }
      window.paceOptions = {
        ajax: false,
        elements: {
          selectors: [".navbar"],
        },
      };
    </script>
    <script>
      MathJax = {
        loader: {load: ['[tex]/mathtools']},
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']],
          processEscapes: true,
          packages: {'[+]': ['mathtools', 'mhchem']}
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script type="text/javascript" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js">
    </script>
    <script src="https://edmingle.b-cdn.net/myaccount/assets/pace.min-81e8d072a04476f8fd4b6d1f65f4188b.js"></script>
    <script src="https://edmingle.b-cdn.net/myaccount/assets/js/ace-f6d64caff20087a53c46c79127c09dc5.js"></script>
    <!-- <script src="https://unpkg.com/piesocket-js@1"></script> -->
    <!-- <script src="https://js.pusher.com/3.2/pusher.min.js"></script> -->
    <script>
      /*var Pusher = new Pusher('47557210b1415af90100', {
            encrypted: true
      });
      window.Pusher = Pusher;*/
    </script>
    <style>
      #initial-loader {
        position: fixed;
        z-index: 2000;
        margin: auto;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        height: 400px;
        width: 40%;
        text-align: center;
      }
      @media (max-width: 768px) {
        #initial-loader {
          width: 90%;
        }
      }
      .text {
        color: #fff;
        margin-top: 40px;
      }
      .pace-active {
        width: 320px;
      }

      .woolf-widget .woolf-widget-button {
        right: 10px;
        bottom: 120px;
      }
    </style>

    
  </head>
  <body>
    <script type="text/javascript" src="//assets.mediadelivery.net/playerjs/player-0.1.0.min.js"></script>

    

    <div id="initial-loader">
      <img id="logoInfo" />
      <br />
      <h3 class="text">Setting up your environment</h3>
    </div>
    <script src="https://edmingle.b-cdn.net/myaccount/assets/vendor-c9a34f9f4f6807af79bb48b2d4825a9b.js"></script>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script src="https://edmingle.b-cdn.net/myaccount/assets/js/jquery-ui-draggable-e9c7ead2d3c981563a73e04746870d51.js" async></script>
    <script src="https://player.vdocipher.com/v2/api.js"></script>
    <div id="nuapp-js"></div>
    <script>
      window.isFromTM = false;

      if (isIDC) {
        (function (i, s, o, g, r, a, m) {
          i["GoogleAnalyticsObject"] = r;
          (i[r] =
            i[r] ||
            function () {
              (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
          (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
          a.async = 1;
          a.src = g;
          m.parentNode.insertBefore(a, m);
        })(
          window,
          document,
          "script",
          "https://www.google-analytics.com/analytics.js",
          "ga"
        );

        ga("create", "UA-71294391-2", "auto");
        ga("send", "pageview");
      }
      var pgUrl = window.location.href;
      var URLObj = new URL(pgUrl);
      var edAuthToken = URLObj.searchParams.get("edauthtoken");
      if (edAuthToken) {
        localStorage.setItem("apikey", edAuthToken);
        //window.location.href = pgUrlArr[0]+'/';
        var deleteParam = URLObj.searchParams.delete("edauthtoken");

        window.history.replaceState({}, "", URLObj.href);
      }

    $.ajax({
        url: apiEndpoint+'institute/instituteinfo'+'?host_name='+hostName,
        headers:{ APIKEY: localStorage.getItem('apikey')}
    }).done(function(json){
      console.log(json.inst_info);
        window.INSTITUTE = json.inst_info;
        var portName = json.inst_info.portal_name;
        var logoArr = json.inst_info.logo_details;
        var portalTitle = json.inst_info ? json.inst_info.name : '';
        titleEle.innerHTML = portalTitle;
        window.LOGO_DETAILS = logoArr;
        window.PORTAL_NAME = portName;
        var msClarityKey = json.inst_info && json.inst_info.ms_clarity_admin_script_key;


          // updating favicon
          var link =
            document.querySelector("link[rel*='icon']") ||
            document.createElement("link");
          link.type = "image/x-icon";
          link.rel = "icon";
          link.href = json.inst_info.favicon_file_url
            ? json.inst_info.favicon_file_url
            : "images/favicon.png";
          document.getElementsByTagName("head")[0].appendChild(link);

          if (logoArr && logoArr.length) {
            var logoData = logoArr.find(function (la) {
              return la.logo_type === 2;
            });

            if (logoData) {
              $("#logoInfo").attr("src", logoData.logo_url);
              $("#logoInfo").css("height", logoData.logo_height);
              $("#logoInfo").css("width", logoData.logo_width);
              if (
                logoData.background_color &&
                logoData.background_color != ""
              ) {
                $(".pace-running").css(
                  "background-color",
                  logoData.background_color
                );
              }
            }
            if (msClarityKey) {
              apiEndpoint = location.protocol + "//" + apiEndHost + endPoint;
              var scriptDiv = document.getElementById("nuapp-js");
              var customScript = document.createElement("script");
              customScript.innerHTML = `(function(c,l,a,r,i,t,y){
                                          c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
                                          t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
                                          y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
                                      })(window, document, "clarity", "script", "${msClarityKey}");`;
              scriptDiv.appendChild(customScript);
            }
          }

          if (hostName === "localhost") {
            apiEndHost = "localhost";
          } else if (isKlassroom) {
            apiEndHost = "klassroom.edmingle.com";
          } else if (isKlassroomTest) {
            apiEndHost = "testklassroom.edupanion.com";
          } else if (hostName.indexOf("edupanion") !== -1) {
            if (portName && portName != "") {
              apiEndHost = portName + "-api.edupanion.com";
            } else {
              apiEndHost = "www.edupanion.com";
            }
          } else if (hostName.indexOf("edmaester") !== -1) {
            apiEndHost = "edmaester-api.edupanion.com";
          } else if (portName && portName != "") {
            apiEndHost = portName + "-api.edmingle.com";
          }

          apiEndpoint = location.protocol + "//" + apiEndHost + endPoint;
          userMetaLoader();
        })
        .fail(function () {
          titleEle.innerHTML = "";
          userMetaLoader();
        });

      function userMetaLoader() {
        window.API_END_POINT = apiEndpoint;
        window.API_END_HOST = location.protocol + "//" + apiEndHost;

        $.ajax({
          url: apiEndpoint + "user/usermeta",
          headers: { APIKEY: localStorage.getItem("apikey") ,'X-REQUEST-GEOLOCATION':true },
        })
          .done(function (json) {
            /*if(isChemophilic && json.user.org_data.length && json.user.org_data[0].role !== 'admin'){
              localStorage.removeItem('apikey');
              location.reload();
            }*/
            var automaticTimzone = json.user.automatic_timezone_selection;
            var currTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            var currTimezoneOffset = new Date().getTimezoneOffset();
            var userTimezone = json.user.timezone;
            if (automaticTimzone == 2 && currTimezone != userTimezone) {
              updateUserTimezone(json, currTimezone, currTimezoneOffset);
            } else {
              afterTimezoneCheck(json);
            }
          })
          .fail(function () {
            userMetaErrorHandler();
          });
      }

      function updateUserTimezone(userMeta, currTimezone, currTimezoneOffset) {
        $.ajax({
          type: "POST",
          url: apiEndpoint + "user/timezone",
          headers: {
            APIKEY: localStorage.getItem("apikey"),
            ORGID: localStorage.getItem("curr_org_id"),
          },
          data: {
            JSONString: JSON.stringify({
              timezone: currTimezone,
              timezone_offset: currTimezoneOffset,
            }),
          },
        })
          .done(function (json) {
            afterTimezoneCheck(userMeta);
          })
          .fail(function () {
            userMetaErrorHandler();
          });
      }

      function afterTimezoneCheck(json) {
        window.num_packages =
          json.num_packages == 0 &&
          json.user_classes &&
          json.user_classes.length <= 1
            ? 0
            : 1;
        window.num_packages = 1;
        window.USER_META = json.user;
        window.CHANNELS = json.channels;
        window.USER_META.is_development = !isIDC;
        window.USER_META.is_woolf_tracking = false;
        window.USER_META.geolocation_info = json.geolocation_info;

        if (isKlassroomKonnect && json.user.org_data.length > 1) {
          var orgData = json.user.org_data || [];
          var lmsOrg = orgData.filter(function (o) {
            return o.institution_id === 1;
          });
          window.USER_META.current_org = lmsOrg[0];
        } else {
          window.USER_META.current_org = json.user.org_data[0];
        }
        localStorage.setItem("name", json.user.name);
        localStorage.setItem("username", json.user.username);
        localStorage.setItem("role", json.user.role);
        localStorage.setItem(
          "curr_org_id",
          window.USER_META.current_org.organization_id
        );
        var resourceLang = json.user.language;
        var langResources = document.createElement("script");
        if (resourceLang === "zh-TW") {
          langResources.setAttribute(
            "src",
            "https://edmingle.b-cdn.net/myaccount/assets/translations/resources_zh-TW-51e294eee3c84f3458d5ceeecac1b627.js"
          );
        } else {
          langResources.setAttribute(
            "src",
            "https://edmingle.b-cdn.net/myaccount/assets/translations/resources_en-72fac24d117f0e4e33b5cab7b6b525d2.js"
          );
        }

        var scriptDiv = document.getElementById("nuapp-js");
        scriptDiv.appendChild(langResources);
        langResources.onload = function () {
          var nuappscript = document.createElement("script");
          nuappscript.setAttribute("src", "https://edmingle.b-cdn.net/myaccount/assets/nuapp-015fd0ad8056f7d44e89d4db5515170f.js");
          scriptDiv.appendChild(nuappscript);
        };

        var instId = json.user.org_data[0].institution_id;
        if (instId == 56 || instId == 32) {
          var customCssFile = document.createElement("link");
          customCssFile.setAttribute("rel", "stylesheet");
          customCssFile.setAttribute("href", "https://edmingle.b-cdn.net/myaccount/assets/stylesheets/themecss-5d10e6d92b7d38fb4d8c3bd63502d419.css");
          scriptDiv.appendChild(customCssFile);
        } else if (instId == 37 || instId == 156) {
          var customCssFile = document.createElement("link");
          customCssFile.setAttribute("rel", "stylesheet");
          customCssFile.setAttribute(
            "href",
            "https://edmingle.b-cdn.net/myaccount/assets/stylesheets/themecssSkae-fd92949b6ecf2e7ec2f276e26d0f32c5.css"
          );
          scriptDiv.appendChild(customCssFile);
        }
        //initiating socket 
        initiateSocket();

      if(json.woolf_info){
        var isWoolfEnabled = json.woolf_info && json.woolf_info.enabled === 1;
        var woolfUserToken = json.woolf_info && json.woolf_info.woolf_token;
        if(isWoolfEnabled && woolfUserToken){
          window.USER_META.is_woolf_tracking = true;
          var woolfSDK = document.createElement('script');
          woolfSDK.src = 'https://unpkg.com/@woolfuniversity/sdk@latest/build/vanilla.js';
          woolfSDK.setAttribute('data-woolf-token', woolfUserToken);
          scriptDiv.appendChild(woolfSDK);
        }
      }

        google.charts.load("current", { packages: ["corechart", "bar"] });
        window.MQ = MathQuill.getInterface(2);
      }

      function userMetaErrorHandler() {
        localStorage.setItem("redirect_from", location.href);
        if (isPremierTuition) {
          window.location = "http://premiertuition.com/";
        } else if (isSkillSertifika) {
          window.location = "https://skillsertifika.com/";
          // actual domain
        } else {
          if (window.INSTITUTE.logout_url) {
            window.location = window.INSTITUTE.logout_url;
          } else {
            window.location = websiteLocation;
          }
        }
      }
    </script>
    <script>
      function onLoad() {
        gapi.load("auth2", function () {
          gapi.auth2.init({
            client_id: googleClientId,
            cookiepolicy: "single_host_origin",
            scope: "profile email",
          });
        });
      }
      $(document).bind("keyup keydown", function (e) {
        if (e.ctrlKey && e.keyCode == 80) {
          e.preventDefault();
        }
      });
    </script>
    <script
      src="https://apis.google.com/js/platform.js?onload=onLoad"
      async
      defer
    ></script>
    <script src="https://player.vimeo.com/api/player.js"></script>

    <!-- <script src="assets/js/videojs5-hlsjs-source-handler.min.js?v=0.3.1"></script>
<script src="assets/js/vjs-quality-picker.js?v=v0.0.2"></script> -->

    <!-- <script src="assets/js/videojs-contrib-quality-levels.min.js"></script>
<script src="assets/js/videojs-hls-quality-selector.min.js"></script> -->

    <link
      href="https://unpkg.com/videojs-hls-quality-selector@1.1.4/dist/videojs-hls-quality-selector.css"
      rel="stylesheet"
    />

<!-- <script src="https://unpkg.com/video.js@7.10.1/dist/video.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/video.js/7.11.4/video.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-quality-levels/2.0.9/videojs-contrib-quality-levels.min.js"></script>
<script src="https://edmingle.b-cdn.net/custom assets/videojs-watermark-1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/videojs-youtube@2.6.1/dist/Youtube.min.js"></script>

<script type="text/javascript" src="https://www.unpkg.com/videojs-hls-quality-selector@1.0.5/dist/videojs-hls-quality-selector.js"></script>

<script src="https://cdn.jsdelivr.net/npm/videojs-contrib-eme@5.0.0/dist/videojs-contrib-eme.min.js"></script>

    <script
      src="https://cdn.socket.io/4.6.0/socket.io.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/ua-parser-js/src/ua-parser.min.js"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>

      function initiateSocket() {
        var userAgent = navigator.userAgent;
        const parser = new UAParser(userAgent);

        var deviceInfo = parser.getDevice()?.type || "Desktop";
        // if (userAgent.match(/iPhone|iPad|iPod/)) {
        //     deviceInfo = "iOS Device";
        // } else if (userAgent.match(/Android/)) {
        //     deviceInfo = "Android Device";
        // }

        // Extract operating system information
        var osInfo = parser.getOS()?.name || "Unknown OS";

        // var osInfo = "Unknown OS";
        // if (userAgent.match(/Windows/)) {
        //     osInfo = "Windows";
        // } else if (userAgent.match(/Mac OS/)) {
        //     osInfo = "Mac OS";
        // } else if (userAgent.match(/Linux/)) {
        //     osInfo = "Linux";
        // }

        // Extract browser information
        var browserInfo = parser.getBrowser()?.name || "Unknown OS";
        // if (userAgent.match(/Chrome/)) {
        //     browserInfo = "Google Chrome";
        // } else if (userAgent.match(/Firefox/)) {
        //     browserInfo = "Mozilla Firefox";
        // } else if (userAgent.match(/Safari/)) {
        //     browserInfo = "Apple Safari";
        // } else if (userAgent.match(/Edge/)) {
        //     browserInfo = "Microsoft Edge";
        // }

        console.log("Device: " + deviceInfo);
        console.log("OS: " + osInfo);
        console.log("Browser: " + browserInfo);

        let disconnectTimer;
        let sessionInfo = localStorage.getItem("sessionInfo") ? JSON.parse(localStorage.getItem("sessionInfo")) : null;
        if(sessionInfo?.endTime <= Math.floor(Date.now() /1000)){
          sessionInfo=null
          localStorage.removeItem("sessionInfo")
        }
        const userInfo = {
          userId: window.USER_META.user_id,
          deviceInfo: deviceInfo,
          osInfo: osInfo,
          browserInfo: browserInfo,
          institutionId: window.INSTITUTE.institute_id,
          organizationId:window.USER_META.current_org.organization_id,
          geoLocationInfo:window.USER_META.geolocation_info ? window.USER_META.geolocation_info : {},
          existingSessionId: localStorage.getItem("sessionInfo") ? JSON.parse(localStorage.getItem("sessionInfo"))?.sessionId : null,
          userRole:window.USER_META.current_org?.role,
          isDashboard:1
        };
        if(!window.INSTITUTE || !window.INSTITUTE.edmingle_v2_node_url){
          return;
        }
        const connectionUrl = window.INSTITUTE.edmingle_v2_node_url;
        const socket = io(connectionUrl, {
          transports: ["websocket"],
          reconnectionAttempts: 3, // Set the maximum number of reconnection attempts
          reconnectionDelay:10000 //10 secs 
        }); 

        socket.off("connect").on("connect", () => {
          console.log("Connected to server");
          socket.emit("userInfo", userInfo);
          socket.on("sessionId", (sessionId) => {
            console.log("sessionId",sessionId);
            localStorage.setItem("sessionInfo",JSON.stringify({sessionId , endTime:Math.floor(Date.now() /1000) + 2*60*60}))
          })

        });

        socket.on("disconnect", () => {
          console.log("Disconnected from server");
        });

        window.edmingleSocket = socket;
        window.emitSocketJoinMetting= (attendance_id) => {
          socket.emit("joinMeeting",attendance_id);
        };


        function startDisconnectTimer() {
          disconnectTimer = setTimeout(() => {
            console.log(
              "User inactive for 2 minutes. Disconnecting socket..."
            );
            if (socket.connected) {
              socket.disconnect();
            }
          }, 2 * 60 * 1000); // 2 minutes in milliseconds
        }

        function resetDisconnectTimer() {
          try {
            clearTimeout(disconnectTimer);
            startDisconnectTimer();
          } catch (err) {
            console.log("err",err)
          }
        }

        // Handle other socket events here...
        document.addEventListener("visibilitychange", () => {
          if (document.visibilityState === "hidden") {
            console.log("Tab is hidden.");
            resetDisconnectTimer();
          } else {
            console.log("Tab is visible");
            clearTimeout(disconnectTimer);

            if (!socket.connected) {
              console.log("Reconnecting socket...");
              socket.connect();
            }
          }
        });
      }
    </script>
    
  </body>
</html>
